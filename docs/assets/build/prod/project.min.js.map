{"version":3,"sources":["svg-sprite.js","app.js","browserUpdate.js","formsAntispam.js","formsValidation.js","linksWithHash.js","mobMenu.js","newsList.js","pageLoad.js","popups.js","responsiveTables.js","sidebar.js","windowResize.js","windowScroll.js"],"names":["document","getElementById","innerHTML","app","slice","Array","prototype","indexOf","elt","len","this","length","from","Number","arguments","Math","ceil","floor","window","createNS","namespace","i","nsparts","parent","part","split","isLocal","isDebug","utils","debouncer","func","timeout","timeoutID","undefined","args","scope","clearTimeout","setTimeout","apply","call","getScrollbarWidth","inner","outer","widthNoScroll","widthWithScroll","wrapper","commonVars","$wrapper","get","clientHeight","innerHeight","createElement","style","visibility","width","body","appendChild","offsetWidth","overflow","parentNode","removeChild","getScrTop","$body","$document","max","scrollTop","getTime","performance","now","precision","parseFloat","toFixed","Date","newMeasureFunc","t0","t1","t2","getInitTimes","k","module","obj","ref","total","modules","initialized","__mName__","__initTime__","all","round","loadScript","url","callback","error","script","fallbackUrl","errorOri","Raven","captureMessage","level","extra","fallback","cb","readyState","onreadystatechange","onerror","onload","src","getElementsByTagName","loadStyle","first","head","link","href","rel","type","firstChild","insertBefore","features","transitionEventEnd","el","t","transitions","transition","OTransition","MozTransition","WebkitTransition","initializedModules","createModule","dep","dependencies","initFunc","j","mName","options","push","init","depModule","e","initTime","l","len1","error1","captureException","errorHandler","moduleName","pre","console","navigator","userAgent","appInitFunc","benchmarkCloseBtn","benchmarkDiv","initTimes","m","time","warningModules","$","$window","location","hash","className","id","results","onclick","mocha","setup","run","addEventListener","attachEvent","isRavenOn","pageLoad","addEvent","interval","setInterval","$buoop","clearInterval","barShown1","barShown2","test","barShown3","$buo_show","barShown","extaConditions","fakeElem","classList","base64","$buo","key","value","barShownMessage","extraContext","hasOwnProperty","join","setExtraContext","browserUpdateBar","forms","filter","find","checkBase64AndFire","btoa","each","form","antispam1Value","val","antispam1ValuePart1","substring","antispam1ValuePart2","antispamValue","antispamElem","append","one","defaultParsleyOptions","errorClass","successClass","errorsWrapper","classHandler","ParsleyField","$element","closest","errorTemplate","state2Class","sendingClass","serverErrorsClass","parsleyInstance","parsley","on","attr","popup","formAction","formMethod","ajaxRecieved","data","serializeArray","singleClose","unsetState2","removeClass","addClass","request","ajax","method","done","newHtml","html","serverErrorsElem","remove","prepend","elemForScroll","scrTop","offset","top","animate","trigger","fail","err","always","links","querySelectorAll","linksWithHashHandler","preventDefault","forEach","index","outerHTML","parentClass","toggleBtns","openedClass","activeClass","opened","expandedBlocks","closeMenu","target","windowScroll","y","documentElement","outerHeight","items","dateClass","toggled","container","dAttrToggleText","sort","a","b","$a","$b","dateTextA","text","trim","dateTextB","dateTimeA","dateTimeB","self","dText","events","singleFunctionFired","singleLoadFunction","timeoutCurrent","shift","popups","evNameOpen","evNameClose","openPopupBtns","closePopupBtns","popupOpenedClass","fixedPageElems","hasFixedElems","dAttrUrl","staticBackUrl","pathname","historyPushed","dAttrAutohide","autohidePopups","getOpenedPopups","changePageUrl","popupID","history","pushState","back","urlToChange","replaceState","clearScrollStyles","force","css","mt","parseInt","isNaN","hasClass","openedPopups","maxZI","zi","scrollbarWidth","mtExists","autohidePopupsOpened","hideDelay","end","selector","closePopupSelector","keyCode","lastOpenedPopup","tables","dAttrLabel","table","thead","th","labels","td","toggleClass","resizeController","f","enabled","scrollController"],"mappings":"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","file":"project.min.js","sourcesContent":["document.getElementById('svg-container').innerHTML = '<svg xmlns=\"http://www.w3.org/2000/svg\"><symbol id=\"svg-arr-down\" viewBox=\"0 0 200 200\"><path d=\"M200 71.9L100 172.1 0 71.9\"/></symbol><symbol id=\"svg-arr-right\" viewBox=\"0 0 200 200\"><path d=\"M99.9 0L200 100 99.9 200M0 100h200\"/></symbol><symbol id=\"svg-menu\" viewBox=\"0 0 200 200\"><path class=\"burger__line burger__line--1\" d=\"M0 100h200\"/><path class=\"burger__line burger__line--2\" d=\"M0 100h200\"/><path class=\"burger__line burger__line--3\" d=\"M0 100h200\"/></symbol><symbol id=\"svg-plus\" viewBox=\"0 0 200 200\"><path d=\"M100 0v200M200 100H0\"/></symbol><symbol id=\"svg-temp-eye\" viewBox=\"0 0 448 448\"><path d=\"M224 105.2c-81.9 0-145.7 48.8-224 128 67.4 67.7 124 128 224 128 99.9 0 173.4-76.39 224-126.6-51.8-58.8-125.2-129.4-224-129.4zm0 36.69c49.4 0 89.59 41.01 89.59 91.31 0 50.4-40.19 91.31-89.59 91.31s-89.59-41.01-89.59-91.31c0-50.4 40.19-91.31 89.59-91.31zm0 38c-28.8 0-52.31 23.91-52.31 53.31s23.51 53.31 52.31 53.31 52.31-23.91 52.31-53.31c0-2.3-.206-4.606-.406-6.906-5.5 4.3-12.31 6.906-19.81 6.906-17.8 0-32.09-14.3-32.09-32 0-7.9 2.894-15.09 7.594-20.69-2.5-.4-4.994-.625-7.594-.625z\"/></symbol><symbol id=\"svg-temp-html5\" viewBox=\"0 0 32 32\"><path fill=\"#E44D26\" d=\"M27.377 28.889L16.001 32 4.625 28.889 2 0h28.002z\"/><path fill=\"#FF6C39\" d=\"M16 2v27.75l9.232-2.742L27.688 2z\"/><path fill=\"#FFF\" d=\"M24.363 6H7.607L8 10l.619 7h10.884l-.355 3.984L16 21.99l-3.143-1.006L12.648 19H8.803l.459 4.987L16 25.99l6.728-2.004.99-10.986H12.252l-.25-3H24z\"/></symbol></svg>';","/* globals Raven */\n/* eslint moduleName:0 */\n\n\"use strict\";\n\n(function() {\n    var app;\n    var slice = [].slice;\n\n    // Hack for IE <= 8\n    if (!Array.prototype.indexOf) {\n        Array.prototype.indexOf = function(elt) {\n            var len = this.length >>> 0;\n            var from = Number(arguments[1]) || 0;\n\n            from = (from < 0) ? Math.ceil(from) : Math.floor(from);\n            if (from < 0) {\n                from += len;\n            }\n\n            for (; from < len; from++) {\n                if (from in this && this[from] === elt) {\n                    return from;\n                }\n            }\n            return -1;\n        };\n    }\n\n    window.app = app = {\n        createNS: function(namespace) {\n            var i, len, nsparts, parent, part;\n            nsparts = namespace.split(\".\");\n            parent = app;\n\n            // we want to be able to include or exclude the root namespace so we strip\n            // it if it's in the namespace\n            if (nsparts[0] === \"app\") {\n                nsparts = nsparts.slice(1);\n            }\n\n            // loop through the parts and create a nested namespace if necessary\n            for (i = 0, len = nsparts.length; i < len; i++) {\n                part = nsparts[i];\n\n                // check if the current parent already has the namespace declared\n                // if it isn't, then create it\n                if (typeof parent[part] === \"undefined\") {\n                    parent[part] = {};\n                }\n\n                // get a reference to the deepest element in the hierarchy so far\n                parent = parent[part];\n            }\n\n            return parent;\n        },\n\n        isLocal: !!document.getElementById(\"js-server-local\"),\n        isDebug: !!document.getElementById(\"js-server-debug\"),\n\n        utils: {\n            debouncer: function(func, timeout) {\n                var timeoutID;\n                if (timeout == null) {\n                    timeout = 200;\n                }\n                timeoutID = undefined;\n                return function() {\n                    var args, scope;\n                    scope = this;\n                    args = arguments;\n                    clearTimeout(timeoutID);\n                    timeoutID = setTimeout(function() {\n                        func.apply(scope, Array.prototype.slice.call(args));\n                    }, timeout);\n                };\n            },\n\n            // Stealed from\n            // https://github.com/VodkaBears/Remodal\n            getScrollbarWidth: function() {\n                var inner, outer, widthNoScroll, widthWithScroll, $wrapper, wrapper;\n                $wrapper = app.commonVars.$wrapper;\n                wrapper = $wrapper.get(0);\n                if (!wrapper || wrapper.clientHeight <= window.innerHeight) {\n                    return 0;\n                }\n                outer = document.createElement(\"div\");\n                inner = document.createElement(\"div\");\n                widthNoScroll = undefined;\n                widthWithScroll = undefined;\n                outer.style.visibility = \"hidden\";\n                outer.style.width = \"100px\";\n                document.body.appendChild(outer);\n                widthNoScroll = outer.offsetWidth;\n\n                // Force scrollbars\n                outer.style.overflow = \"scroll\";\n\n                // Add inner div\n                inner.style.width = \"100%\";\n                outer.appendChild(inner);\n                widthWithScroll = inner.offsetWidth;\n\n                // Remove divs\n                outer.parentNode.removeChild(outer);\n                outer = inner = null;\n                return widthNoScroll - widthWithScroll;\n            },\n\n            // TODO\n            // REPAINT\n            // Вызывает Recalculate Style\n            // Проверить, из-за чего, и можно ли избавиться\n            getScrTop: function() {\n                var $body, $document, $wrapper, scrTop;\n                $document = app.commonVars.$document;\n                $body = app.commonVars.$body;\n                $wrapper = app.commonVars.$wrapper;\n                scrTop = Math.max($document.scrollTop(), $body.scrollTop(), $wrapper.scrollTop(), 0);\n                return scrTop;\n            },\n\n            getTime: (function() {\n                var res;\n                if (window.performance && typeof window.performance.now === \"function\") {\n                    res = function(precision) {\n                        if (precision == null) {\n                            precision = 1;\n                        }\n                        return parseFloat(window.performance.now().toFixed(precision));\n                    };\n                } else {\n                    res = function(precision) {\n                        if (precision == null) {\n                            precision = 1;\n                        }\n                        return parseFloat(new Date().getTime().toFixed(precision));\n                    };\n                }\n                return res;\n            })(),\n\n            newMeasureFunc: function(precision) {\n                var res, t0;\n                if (precision == null) {\n                    precision = 2;\n                }\n                t0 = app.utils.getTime(precision);\n                res = function() {\n                    var t1, t2;\n                    t1 = app.utils.getTime(precision);\n                    t2 = parseFloat((t1 - t0).toFixed(precision));\n                    t0 = t1;\n                    return t2;\n                };\n                return res;\n            },\n\n            getInitTimes: function() {\n                var k, module, obj, ref, total;\n                obj = {};\n                total = 0;\n                ref = app.modules;\n                for (k in ref) {\n                    module = ref[k];\n                    if (module.initialized && module.__mName__ !== undefined) {\n                        obj[module.__mName__] = module.__initTime__;\n                        total += module.__initTime__;\n                    }\n                }\n                obj.all = Math.round(total);\n                return obj;\n            }\n        },\n\n        loadScript: function(url, callback, error) {\n            var script;\n            script = document.createElement(\"script\");\n\n            // If \"fallback\" url passed as second argument\n            var args = Array.prototype.slice.call(arguments);\n            if (typeof callback === \"string\") {\n                var fallbackUrl = callback;\n                callback = error;\n                var errorOri = args[3];\n                error = function() {\n                    DEBUG && console.log(\"%c[common] error while loading script: \" + url + \". trying to load a fallback url: \" + fallbackUrl, \"color: red\");\n                    app.loadScript(fallbackUrl, callback, errorOri);\n\n                    if (!DEBUG && typeof Raven !== \"undefined\") {\n                        Raven.captureMessage(\"[common] error while loading script\", {\n                            level: \"warning\", // one of 'info', 'warning', or 'error'\n                            extra: {\n                                \"script\": url,\n                                \"fallback\": fallbackUrl\n                            }\n                        });\n                    }\n                };\n            }\n\n            var cb = function() {\n                DEBUG && console.log(\"%c--[common] finished loading script: \" + url, \"color: #999\");\n                if (typeof callback === \"function\") {\n                    callback();\n                }\n            };\n\n            // IE\n            if (script.readyState) {\n                script.onreadystatechange = function() {\n                    if (script.readyState === \"loaded\" || script.readyState === \"complete\") {\n                        script.onreadystatechange = null;\n                        cb();\n                    }\n                };\n\n            // Normal browsers\n            } else {\n                if (typeof error === \"function\") {\n                    script.onerror = error;\n                }\n                script.onload = cb;\n            }\n\n            script.src = url;\n            document.getElementsByTagName(\"body\")[0].appendChild(script);\n            DEBUG && console.log(\"%c--[common] starting to load script: \" + url, \"color: #999\");\n        },\n\n        loadStyle: function(url) {\n            var first, head, link;\n            link = document.createElement(\"link\");\n            link.href = url;\n            link.rel = \"stylesheet\";\n            link.type = \"text/css\";\n            head = document.getElementsByTagName(\"head\")[0];\n            first = head.firstChild;\n\n            // Prepend styles in 'head' section\n            head.insertBefore(link, first);\n        },\n\n        features: {\n            // From Modernizr\n            transitionEventEnd: (function() {\n                var el, t, transitions;\n                el = document.createElement(\"fakeelement\");\n                transitions = {\n                    \"transition\": \"transitionend\",\n                    \"OTransition\": \"oTransitionEnd\",\n                    \"MozTransition\": \"transitionend\",\n                    \"WebkitTransition\": \"webkitTransitionEnd\"\n                };\n                for (t in transitions) {\n                    if (el.style[t] !== undefined) {\n                        el = null;\n                        return transitions[t];\n                    }\n                }\n                return false;\n            })()\n        },\n\n        modules: {},\n\n        initializedModules: [],\n\n        createModule: function() {\n            var dep, dependencies, i, initFunc, j, len, mName, module, options, ref;\n            mName = arguments[0], options = 3 <= arguments.length ? slice.call(arguments, 1, i = arguments.length - 1) : (i = 1, []), initFunc = arguments[i++];\n            if (typeof initFunc !== \"function\") {\n                throw \"Missing an initialization function for module '\" + mName + \"'\";\n            }\n\n            // Create a namespace\n            module = app.createNS(\"modules.\" + mName);\n            module.__mName__ = mName;\n            module.initialized = false;\n\n            // Set dependencies\n            if (options.length && options[0].length) {\n                dependencies = [];\n                ref = options[0];\n                for (j = 0, len = ref.length; j < len; j++) {\n                    dep = ref[j];\n                    if (typeof dep === \"string\" && dependencies.indexOf(dep) < 0 && dep !== mName) {\n                        dependencies.push(dep);\n                    }\n                }\n                if (dependencies.length) {\n                    module.dependencies = dependencies;\n                }\n            }\n\n            // Set initialization function and behavior\n            module.init = function() {\n                var depModule, e, initTime, initializedModules, l, len1, t1, t2;\n                try {\n                    if (module.dependencies) {\n                        for (l = 0, len1 = dependencies.length; l < len1; l++) {\n                            dep = dependencies[l];\n                            depModule = app.modules[dep];\n                            if (!depModule) {\n                                DEBUG && console.log(\"%c[modules] missed module \" + dep + \" as a dependency for module \" + mName + \". (it's ok only if module is not required for this page)\", \"color: #BB6565; font-style: italic\");\n                                return false;\n                            }\n                            if (depModule.initialized) {\n                                continue;\n                            }\n                            depModule.init();\n                            if (!depModule.initialized) {\n                                DEBUG && console.log(\"%c[modules] can't init module \" + dep + \" as a dependency for module \" + mName + \". (it's ok only if module is not required for this page)\", \"color: #BB6565; font-style: italic\");\n                                return false;\n                            }\n                        }\n                    }\n                    t1 = app.utils.getTime();\n                    if (initFunc.call(module) !== false) {\n                        module.init = function() {\n                            throw \"[modules] module '\" + mName + \"' already initialized\";\n                        };\n                        t2 = app.utils.getTime();\n                        initTime = parseFloat((t2 - t1).toFixed(1));\n                        module.__initTime__ = initTime;\n                        DEBUG && console.log(\"[module \" + mName + \"] module initialized in \" + initTime + \" ms\");\n                        module.initialized = true;\n                        initializedModules = app.initializedModules || [];\n                        initializedModules.push(mName);\n                        app.initializedModules = initializedModules;\n                    }\n                } catch (error1) {\n                    e = error1;\n                    if (typeof Raven !== \"undefined\") {\n                        Raven.captureException(e);\n                    }\n                    app.errorHandler(e, {\n                        moduleName: mName\n                    });\n                }\n            };\n            return module;\n        },\n\n        errorHandler: function(error, options) {\n            var pre;\n            pre = \"[error]\";\n            if (options && options.moduleName) {\n                pre += \"[module \" + options.moduleName + \"]\";\n            }\n            if (console && console.error) {\n                console.error(pre + \"\\n\" + error + \"\\nNavigator: \" + window.navigator.userAgent);\n            }\n        }\n    };\n\n    // Unit-tests for app object\n    if (DEBUG && typeof mocha !== \"undefined\" && typeof describe === \"function\") {\n        mocha.setup(\"bdd\");\n        describe(\"app object tests\", function() {\n            it(\"Should be an object\", function() {\n                expect(app).to.be.an(\"object\");\n            });\n            it(\"Should contain a loadScript function\", function() {\n                expect(app.loadScript).to.be.a(\"function\");\n            });\n            it(\"Should contain a loadStyle function\", function() {\n                expect(app.loadStyle).to.be.a(\"function\");\n            });\n            it(\"We can create a deep namespace scope with a string like 'ns1.ns2.ns3'\", function() {\n                app.createNS(\"ns1.ns2.ns3\");\n                expect(app.ns1).to.be.an(\"object\");\n                expect(app.ns1.ns2).to.be.an(\"object\");\n                expect(app.ns1.ns2.ns3).to.be.an(\"object\");\n                delete app.ns1;\n            });\n            it(\"initializedModules must be defined from the start\", function() {\n                expect(app.initializedModules).to.be.an(\"array\");\n            });\n\n            describe(\".modules\", function() {\n                it(\"Should be a function to create modules\", function() {\n                    expect(app.createModule).to.be.a(\"function\");\n                });\n                it(\"We can simply create a single module\", function() {\n                    var module, testFunc;\n                    testFunc = function() {\n                        console.log(\"test module init\");\n                    };\n                    var mName = \"testmodule\" + Math.round(Math.random() * 100);\n                    module = app.createModule(mName, testFunc);\n                    expect(module).to.be.equal(app.modules[mName]);\n                    app.initializedModules.splice(app.initializedModules.indexOf(mName), 1);\n                    delete app.modules[mName];\n                });\n                it(\"We can't create a module without initialization function\", function() {\n                    var module;\n                    module = function() {\n                        app.createModule(\"testmodule\");\n                    };\n                    expect(module).to[\"throw\"];\n                });\n                it(\"Each module must have an init function\", function() {\n                    var module;\n                    for (module in app.modules) {\n                        expect(app.modules[module].init).to.be.a(\"function\");\n                    }\n                });\n                it(\"Should throw an exception if we try to initialize a module twice\", function() {\n                    var mName, module, testFunc;\n                    mName = \"testmodule\" + Math.round(Math.random() * 100);\n                    testFunc = function() {\n                        return 1;\n                    };\n                    module = app.createModule(mName, testFunc);\n                    module.init();\n                    expect(module.init).to[\"throw\"];\n                    app.initializedModules.splice(app.initializedModules.indexOf(mName), 1);\n                    delete app.modules[mName];\n                });\n            });\n        });\n    }\n\n\n\n    var appInitFunc = function() {\n        var init = function() {\n            app.commonVars = {\n                $document: $(\"body, html\"),\n                $body: $(\"body\"),\n                $window: $(window),\n                $wrapper: $(\".l-wrapper\")\n            };\n\n            var benchmarkCloseBtn, benchmarkDiv, criticalInitTime, dColor, fTime, initTimes, m, module, moduleName, t, time, warningModules;\n            if (DEBUG) {\n                t = app.utils.getTime();\n            }\n\n            // Initialize app modules\n            for (m in app.modules) {\n                module = app.modules[m];\n                if (!module.initialized && typeof module.init === \"function\") {\n                    module.init();\n                }\n            }\n            if (DEBUG) {\n                fTime = Math.round(app.utils.getTime() - t);\n                dColor = fTime < 200 ? \"green\" : \"red\";\n                console.log(\"%c[common] document ready event fired, \" + app.initializedModules.length + \" modules initialized in \" + fTime + \" ms: \" + ((function() {\n                    var i, len, ref, results;\n                    ref = app.initializedModules;\n                    results = [];\n                    for (i = 0, len = ref.length; i < len; i++) {\n                        m = ref[i];\n                        results.push(\" \" + m + \"(\" + app.modules[m].__initTime__ + \"ms)\");\n                    }\n                    return results;\n                })()), \"color: \" + dColor);\n            }\n\n            // Add benchmark div\n            benchmarkDiv = document.getElementById(\"benchmark\");\n            if (typeof app.utils.getInitTimes === \"function\" && (DEBUG || window.location.hash === \"#benchmark\") && !benchmarkDiv) {\n                benchmarkDiv = document.createElement(\"div\");\n                benchmarkDiv.className = \"benchmark\";\n                benchmarkDiv.id = \"benchmark\";\n                if (typeof app.utils.getInitTimes === \"function\") {\n                    benchmarkDiv.innerHTML = \"<small style=\\\"opacity: 0.7\\\">modules (ms):\" + ((function() {\n                        var ref, results;\n                        ref = app.utils.getInitTimes();\n                        results = [];\n                        for (m in ref) {\n                            t = ref[m];\n                            results.push(\" \" + m + \": \" + t);\n                        }\n                        return results;\n                    })()) + \"</small>\";\n                }\n\n                // Add close button\n                benchmarkCloseBtn = document.createElement(\"a\");\n                benchmarkCloseBtn.onclick = function() {\n                    benchmarkDiv.parentNode.removeChild(benchmarkDiv);\n                };\n                benchmarkCloseBtn.innerHTML = \"X\";\n                benchmarkCloseBtn.className = \"benchmark__close\";\n                benchmarkDiv.appendChild(benchmarkCloseBtn);\n                document.body.appendChild(benchmarkDiv);\n            }\n\n            // Check for \"too complex\" modules\n            // WARNING иногда такие \"ошибки\" возникают спонтанно\n            // (например, все модули инициализируются за 0-2 мс, а один \"выстрелил\" на 300 мс).\n            // Если это станет мешать проектам, то можно данные предупреждения\n            // из логгера убрать.\n            if (!DEBUG && typeof Raven !== \"undefined\") {\n                initTimes = app.utils.getInitTimes();\n                warningModules = [];\n                criticalInitTime = 50;\n                for (moduleName in initTimes) {\n                    time = initTimes[moduleName];\n                    if (moduleName === \"all\") {\n                        continue;\n                    }\n                    if (time > criticalInitTime) {\n                        warningModules.push(moduleName);\n                    }\n                }\n\n                //  CHANGED: Вот именно из-за того, что один из модулей может\n                //  случайно инициализироваться за какое-то неадекватно большое для него время.\n                //  if warningModules.length > 0\n                if (warningModules.length > 1) {\n                    Raven.captureMessage(\"[common] detected some \\\"long\\\" (initTime > \" + criticalInitTime + \" ms) modules\", {\n                        level: \"warning\", // one of 'info', 'warning', or 'error'\n                        extra: initTimes\n                    });\n                }\n            }\n\n            // If unit tests library loaded, just load a file with tests\n            if (typeof mocha !== \"undefined\") {\n                mocha.setup(\"bdd\");\n                mocha.run();\n            }\n        };\n\n        // Load jQuery library\n        if (\"addEventListener\" in document) {\n            app.loadScript(\"//code.jquery.com/jquery-3.0.0.min.js\", \"/assets/scripts/jquery-3.0.0.min.js\", init);\n\n        // .. IE <= 8\n        } else if (\"attachEvent\" in document) {\n            app.loadScript(\"//code.jquery.com/jquery-1.12.4.min.js\", \"/assets/scripts/jquery-1.12.4.min.js\", init);\n        }\n    };\n\n    // Document ready event\n    if (\"addEventListener\" in document) {\n        document.addEventListener(\"DOMContentLoaded\", appInitFunc, false);\n\n    // .. IE <= 8\n    } else if (\"attachEvent\" in document) {\n        document.attachEvent(\"onreadystatechange\", function() {\n            if (document.readyState === \"complete\") {\n                appInitFunc();\n            }\n        });\n    }\n})();","/* globals Raven, $buoop, $buo, $buo_show */\n/* eslint camelcase:0 */\n\n/**\n * Ненавязчивая плашка, которая оповестит пользователя о том,\n * что его браузер устарел и нуждается в обновлении.\n * https://browser-update.org/\n *\n * NOTE: Для нормальных браузеров данная плашка, понятное дело, не отображается.\n * Но посмотреть, как она выглядит, можно, выполнив в консоли код:\n * $buo({}, true);\n */\napp.createModule(\"browserUpdate\", [\"pageLoad\"], function() {\n\n    // Локальные переменные\n    var module = this;\n    var isRavenOn = typeof window.Raven !== \"undefined\";\n\n\n    /**\n     * Запуск интервального таймера\n     */\n    var init = function() {\n        /**\n         * Функция, которая будет вызываться с определённым интервалом\n         * до тех пор, пока скрипты с сайта browser-update.org не загрузятся и не отработают.\n         */\n        var intervalFunc = function() {\n            // Так как нет прямого метода, позволяющего определить, отработали или нет скрипты browser-update.org,\n            // то определяем косвенно, по наличию некоторой глобальной переменной.\n            if (typeof $buoop === \"undefined\") {\n                return;\n            }\n\n            // Один раз определив момент, когда скрипты browser-update.org отработали,\n            // отменяем интервальный таймер.\n            clearInterval(interval);\n\n            // Три разных косвенных способа проверить, была ли пользователю\n            // показана плашка с предупреждением об устаревшем браузере:\n            var barShown1 = !!document.getElementById(\"buorg\");\n            var barShown2 = $buoop.test;\n            var barShown3 = typeof $buo_show !== \"undefined\";\n\n            // Необходимо, чтобы хотя бы один косвенный метод дал положительный результат,\n            // тогда будем считать, что плашка, действительно, показана.\n            var barShown = barShown1 || barShown2 || barShown3;\n\n\n            // Если сам скрипт посчитал, что браузер не устаревший, хотя на самом деле\n            // он не поддерживает некоторые функции, мы можем сами определить\n            // дополнительные проверки, по результатам которых решим,\n            // показывать или нет сообщение пользователю.\n            var extaConditions = [];\n            if (!barShown) {\n                var fakeElem = document.createElement(\"div\");\n\n                // Проверка, поддерживает ли браузер операции classList.add, classList.remove и т. п.\n                // (проверку провалят браузеры на android 2.3.6 и аналогичные динозавры)\n                if (!(\"classList\" in fakeElem) || !(\"add\" in fakeElem.classList)) {\n                    extaConditions.push(\"classList\");\n                }\n\n                // Проверка, поддерживает ли браузер обработчик событий addEventListener\n                // (проверку провалят старые IE)\n                if (!(\"addEventListener\" in document)) {\n                    extaConditions.push(\"addEventListener\");\n                }\n\n                // Проверка, поддерживает ли браузер методы window.btoa и window.atob,\n                // которые нужны для преобразований base64\n                // (проверку провалят старые IE)\n                if (app.modules.base64 && app.modules.base64.initialized === true) {\n                    extaConditions.push(\"base64\");\n                }\n\n                // Если хотя бы одно из доп. условий сработало,\n                // то показываем плашку с предложением обновить браузер.\n                if (extaConditions.length > 0) {\n                    $buo({}, true); // Показать предупреждение (принудительно)\n                    barShown = true;\n                    DEBUG && console.log(\"[module browserUpdate] bar shown by additional conditions\");\n                }\n            }\n\n            // Создаём объект с параметрами, которые мы передадим в js-логгер\n            var barShownMessage = (barShown ? \"shown\" : \"not shown\");\n            var extraContext = {};\n            var key, value;\n\n            for (key in $buoop) {\n                value = $buoop[key];\n                if ($buoop.hasOwnProperty(key) && typeof value !== \"function\") {\n                    extraContext[key] = value;\n                }\n            }\n\n            if (extaConditions.length > 0) {\n                extraContext[\"extraConditions\"] = extaConditions.join(\", \");\n            }\n\n            // Отправить сообщение в js-логгер\n            // (только в том случае, если плашка показана)\n            if (isRavenOn && barShown) {\n                Raven.captureMessage(\"[module browserUpdate] old browser detected\", {\n                    level: \"info\", // one of 'info', 'warning', or 'error'\n                    extra: extraContext\n                });\n            }\n\n            // Передать в остальные модули, где будет происходить отправка\n            // сообщений в логгер, параметр browserUpdateBar (показана плашка или нет).\n            if (isRavenOn) {\n                Raven.setExtraContext({\n                    browserUpdateBar: barShownMessage\n                });\n            }\n\n            DEBUG && console.log(\"[module browserUpdate] object recieved. barShown: \" + barShown + \". extraContext: \", extraContext);\n            module.extraContext = extraContext;\n            module.barShown = barShown;\n        };\n\n        // Выполняем функцию с определённым интервалом,\n        // так как загрузка скрипта //browser-update.org/update.min.js -\n        // это не тот самый момент, когда отрабатывает сам скрипт.\n        // Дело в том, что там дальше по цепочке грузится ещё один скрипт, вот почему\n        // мы не можем чётко отследить момент, когда всё-таки у нас прошла проверка на устаревшие браузеры.\n        // Функция будет выполняться до тех пор,\n        // пока не появится объект $buoop - признак того, что проверка произведена.\n        var interval = setInterval(intervalFunc, 100);\n    };\n\n\n    /**\n     * Грузим первоначальный скрипт с сайта browser-update.org\n     * (локальная версия - в качестве fallback'а),\n     * после чего запускаем наш интервальный таймер,\n     * ловим момент загрузки второго скрипта и т. д.\n     */\n    var load = function() {\n        app.loadScript(\"//browser-update.org/update.min.js\", \"/assets/scripts/browser-update.min.js\", function() {\n            DEBUG && console.log(\"[module browserUpdate] script loaded\");\n            init();\n        });\n    };\n\n\n    // Делегируем функцию в модуль pageLoad\n    // (откладываем выполнение до полной загрузки страницы)\n    DEBUG && console.log(\"%c--[module browserUpdate] delegating load to pageLoad module\", \"font-style: italic; color: #999\");\n    app.modules.pageLoad.addEvent(load);\n});","/**\n * Добавление скрытых антиспам-полей в формы на сайте\n *\n * NOTE: Здесь используется модуль app.modules.base64,\n * но перечислять его в качестве зависимости не обязательно,\n * т. к. логика работы текущего модуля позволяет обойтись без зависимости.\n */\napp.createModule(\"formsAntispam\", function() {\n    // Выбраны будут только те формы, у которых уже есть одно скрытое\n    // поле с антиспам-кодом, полученным из php.\n    // Другие формы (в т. ч. те, которые не надо проверять на спам),\n    // будут проигнорированы.\n    var forms = $(\"form\").filter(function() {\n        return $(this).find(\"[name='antispam']\").length > 0;\n    });\n    if (!forms.length) {\n        return false;\n    }\n\n    // Локальные переменные\n    var antispamElemAppendDelay = 2000;\n\n\n    /**\n     * Вспомогательная функция, которая является подстраховкой\n     * на случай, если не определена функция window.btoa\n     * (нужна для base64-преобразований).\n     * Для нормальных браузеров переданная функция будет исполнена сразу,\n     * для старых - сначала загружена библиотека base64.js, и только затем выполнена функция.\n     *\n     * @param  {function} func\n     */\n    var checkBase64AndFire = function(func) {\n        if (typeof func !== \"function\") {\n            return;\n        }\n\n        // Для нормальных браузеров - функция будет вызвана сразу\n        if (typeof window.btoa === \"function\") {\n            func();\n\n        // Для старых браузеров - выполнение функции откладывается\n        } else if (app.modules.base64 && typeof app.modules.base64.addEvent === \"function\") {\n            app.modules.base64.addEvent(func);\n\n        // Случай, если что-то пошло не так (например, отсутствует модуль app.modules.base64)\n        } else {\n            DEBUG && console.log(\"%c[module formsAntispam] something went wrong with window.btoa function. check your code and loaded files!\", \"color: red\");\n        }\n    };\n\n\n    /**\n     * Проходимся по всем формам, для каждой\n     * определяем свою область видимости, свои функции вставки скрытых полей и т. д.\n     */\n    forms.each(function() {\n        var form = $(this);\n\n        var antispam1Value = form.find(\"[name='antispam']\").val();\n        var antispam1ValuePart1 = antispam1Value.substring(0, antispam1Value.indexOf(\".\"));\n        var antispam1ValuePart2 = antispam1Value.substring(antispam1Value.indexOf(\".\") + 1);\n\n        var appendFirstAntispamElem = function() {\n            var f = function() {\n                var antispamValue = window.btoa(antispam1ValuePart1 + \"5d41402abc4b2a76b9719d911017c592\");\n                var antispamElem = $(\"<input type=\\\"hidden\\\" name=\\\"antispam2\\\" value=\\\"\" + antispamValue + \"\\\">\");\n                DEBUG && console.log(\"%c[module formsAntispam] first antispam element appended. antispamValue: \" + antispamValue, \"font-style: italic; color: orange;\");\n                form.append(antispamElem);\n            };\n\n            checkBase64AndFire(f);\n        };\n\n        var appendSecondAntispamElem = function() {\n            var f = function() {\n                var antispamValue = window.btoa(antispam1ValuePart2 + \"7d793037a0760186574b0282f2f435e7\");\n                var antispamElem = $(\"<input type=\\\"hidden\\\" name=\\\"antispam3\\\" value=\\\"\" + antispamValue + \"\\\">\");\n                DEBUG && console.log(\"%c[module formsAntispam] second antispam element appended. antispamValue: \" + antispamValue, \"font-style: italic; color: orange;\");\n                form.append(antispamElem);\n            };\n\n            checkBase64AndFire(f);\n        };\n\n        // Первое скрытое поле будет добавлено после определённого таймаута\n        // (но при этом не требует от пользователя каких-либо действий)\n        setTimeout(appendFirstAntispamElem, antispamElemAppendDelay);\n\n        // Второе скрытое поле добавляется только после определённого\n        // действия пользователя:\n        // предполагаем, что любой пользователь перед отправкой формы переводит фокус\n        // на одно из полей формы\n        // (трудно представить, что есть механизм, вставляющий все данные формы\n        // и одновременно производящий субмит).\n        form.one(\"focus\", \"input:not([type='submit']), textarea, select\", appendSecondAntispamElem);\n    });\n});","/**\n * Валидация форм с помощью библиотеки:\n * http://parsleyjs.org/\n *\n * NOTE: ajax-отправка формы обрабатывается в этом модуле\n */\napp.createModule(\"formsValidation\", [\"pageLoad\"], function() {\n    var forms = $(\".js-form-validate\");\n    if (!forms.length) {\n        return false;\n    }\n\n    // Локальные переменные\n    var errorMsgWrapperClass = \"form__error-msg\";\n    var serverErrorMsgWrapperClass = \"form__err\";\n    var inputWrapperClass = \"form__input-wrapper\";\n    var defaultParsleyOptions = {\n        errorClass: \"is-error\",\n        successClass: \"is-success\",\n        errorsWrapper: \"<div class=\\\"\" + errorMsgWrapperClass + \"\\\"></div>\",\n        classHandler: function(ParsleyField) {\n            return ParsleyField.$element.closest(\".\" + inputWrapperClass);\n        },\n        errorTemplate: \"<div></div>\"\n    };\n    var $document = app.commonVars.$document;\n    var state2Class = \"is-state-2\";\n    var sendingClass = \"is-sending\";\n    var state2HideDelay = 4000;\n    var serverErrorsClass = \"js-form-errors\";\n    var dAttrAjaxSubmit = \"data-ajax-submit\";\n\n\n    /**\n     * Инициализация сущности Parsley\n     * + обработка ajax-отправки для каждой из форм.\n     * Данная функция будет отложена до момента загрузки библиотеки.\n     */\n    var init = function() {\n        forms.each(function() {\n            var form = $(this);\n\n            var ajaxSubmit = function() {\n                return form.attr(dAttrAjaxSubmit) === \"true\";\n            };\n\n            var success = function() {\n                DEBUG && console.log(\"[module formsValidation] validation success\");\n            };\n\n            var error = function() {\n                DEBUG && console.log(\"[module formsValidation] validation error\");\n            };\n\n            var submit = function() {\n                DEBUG && console.log(\"[module formsValidation] validation submit\");\n\n                // Для форм без ajax-отправки, завершаем выполнение\n                // текущей функции, тем самым произойдёт действие по умолчанию для формы\n                // (данные будут отправлены с перезагрузкой страницы).\n                if (!ajaxSubmit()) {\n                    return;\n                }\n\n                var popup = form.closest(\".popup\");\n                var formAction = form.attr(\"action\");\n                var formMethod = form.attr(\"method\");\n                var ajaxRecieved = false;\n                var data = form.serializeArray();\n                DEBUG && console.log(\"[module formsValidation] serialized data:\");\n                DEBUG && console.log(data);\n\n                // Вспомогательная функция (helper)\n                var singleClose = function() {\n                    setTimeout(unsetState2, 500);\n                };\n\n                /**\n                 * Вывод сообщения об успешной отправке формы\n                 */\n                var setState2 = function() {\n                    DEBUG && console.log(\"[module formsValidation] set state-2\");\n\n                    // Данный класс скрывает один блок у формы,\n                    // и отображает другой.\n                    form.addClass(state2Class);\n\n                    // Если форма находится на всплывашке, то вешаем\n                    // однократное срабатывание на закрытие всплывашки.\n                    // И одновременно начинаем таймер, чтобы через некоторое время\n                    // сообщение об ошибке скрылось.\n                    // Таким образом, не важно, пользователь сам закроет вслывашку\n                    // (быстрее, чем сработает таймер), или она закроется автоматически,\n                    // функция singleClose отработает всего лишь один раз.\n                    if (popup.length) {\n                        popup.one(\"popups:close\", singleClose);\n                        setTimeout(function() {\n                            popup.trigger(\"popups:close\");\n                        }, state2HideDelay);\n\n                    // Если форма находится не на всплывашке,\n                    // то ставим такой же таймер, но без привязки\n                    // к событию закрытия всплывашки.\n                    } else {\n                        setTimeout(singleClose, state2HideDelay);\n                    }\n                };\n\n                /**\n                 * Вовзращает форму к исходному виду\n                 * (скрывает сообщение об успешной отправке).\n                 */\n                var unsetState2 = function() {\n                    DEBUG && console.log(\"[module formsValidation] unset state-2\");\n                    form.removeClass(state2Class);\n                };\n\n                /**\n                 * Обработка ajax-запроса при отправке формы\n                 * (когда ответ пришёл).\n                 *\n                 * @param  {string}   data\n                 */\n                var done = function(data) {\n                    var newHtml = $(\"<div></div>\");\n                    newHtml.html(data);\n                    var $data = newHtml;\n                    // Ищем в пришедших данных элементы со служебным классом,\n                    // в которых будет сообщение об ошибках\n                    // (сообщения могут быть разные, и они формируются на сервере).\n                    var serverErrorsElem = $data.find(\".\" + serverErrorsClass);\n                    DEBUG && console.log(\"[module formsValidation] ajax done. data.length: \" + data.length + \". errorsFound: \" + (serverErrorsElem.length > 0));\n\n                    // Независимо ни от чего,\n                    // удаляем предыдущие сообщения об ошибках со стороны сервера.\n                    form.find(\".\" + serverErrorsClass).remove();\n\n                    // Если ошибок с сервера не пришло,\n                    // значит форма прошла серверную валидацию и можно показывать\n                    // пользователю сообщение об успешной отправке.\n                    if (!serverErrorsElem.length) {\n                        setState2();\n                        form.data(\"validation-passed\", \"false\");\n                        // Обнуляем поля формы, так как мы со страницы никуда не уходили,\n                        // а форма уже отправлена. Будет странно, если пользователь после\n                        // успешной отправки увидит те же данные, введённые в форму.\n                        // Подумает, что это баг, и отправит повторно.\n                        form.trigger(\"reset\");\n\n                    // Если с сервера пришли ошибки, то вставляем их в форму\n                    // и прокручиваем страницу, чтобы пользователь обратил внимание на ошибки.\n                    } else {\n                        form.prepend(serverErrorsElem.addClass(serverErrorMsgWrapperClass));\n\n                        // Выбираем элемент, который будем скроллить\n                        // (на случай, если форма находится на всплывашке).\n                        var elemForScroll = popup.length ? popup : $document;\n                        var scrTop = serverErrorsElem.offset().top - window.innerHeight / 2;\n                        elemForScroll.animate({\n                            scrollTop: scrTop\n                        });\n                    }\n                };\n\n                /**\n                 * Обработчик ошибок ajax-запроса\n                 * (когда ответ не пришёл).\n                 *\n                 * NOTE: Редкий случай, но в идеале можно\n                 * сделать нормальный обработчик, вывести пользователю\n                 * какое-либо полезное сообщение, и т. д.\n                 *\n                 * @param  {object} err\n                 */\n                var fail = function(err) {\n                    DEBUG && console.log(\"[module formsValidation] ajax fail. error: \", err);\n                };\n\n                /**\n                 * Функция, которая выполнится всегда,\n                 * вне зависимости от того, пришёл ajax-ответ или нет.\n                 * Например, нам в любом случае нужно убрать неактивное состояние у формы,\n                 * которое задаётся в момент её отправки.\n                 */\n                var always = function() {\n                    form.removeClass(sendingClass);\n                    ajaxRecieved = true;\n                    DEBUG && console.log(\"[module formsValidation] ajax always\");\n                };\n\n                // Неактивное состояние у формы\n                // лучше задавать через небольшой промежуток времени,\n                // так как если форма отправится слишком быстро, то данное состояние\n                // не только не нужно, но и, наоборот, будет во вред, т. к.\n                // произойдёт \"мелькание\" формы (слишком быстрая смена стилей).\n                setTimeout(function() {\n                    if (!ajaxRecieved) {\n                        form.addClass(sendingClass);\n                    }\n                }, 300);\n\n                // Отправляем ajax-запрос\n                var request = $.ajax({\n                    url: formAction,\n                    method: formMethod,\n                    data: data\n                });\n\n                // Добавляем обработчики ajax-событий\n                request.done(done);\n                request.fail(fail);\n                request.always(always);\n\n                // Отменяем действие по умолчанию для формы\n                // (иначе страница перезагрузится)\n                return false;\n            };\n\n            // Создаём сущность Parsley\n            // и делаем привязку событий и функций-обработчиков\n            var parsleyInstance = form.parsley(defaultParsleyOptions);\n            parsleyInstance.on(\"form:success\", success);\n            parsleyInstance.on(\"form:error\", error);\n            parsleyInstance.on(\"form:submit\", submit);\n        });\n    };\n\n\n    var loadLibrary = function() {\n        app.loadScript(\"/assets/scripts/parsley.min.js\", function() {\n            DEBUG && console.log(\"[module formsValidation] parsley.js library loaded, ready to initialize module\");\n            init();\n        });\n    };\n\n    // Делегируем функцию в модуль pageLoad\n    // (откладываем выполнение до полной загрузки страницы)\n    DEBUG && console.log(\"%c--[module formsValidation] delegating loadLibrary to pageLoad module\", \"font-style: italic; color: #999\");\n    app.modules.pageLoad.addEvent(loadLibrary);\n});","/* globals Raven */\n\n/**\n * Отмена действия по умолчанию для ссылок с атрибутом href=\"#\".\n * В нашей заготовки таковыми являются ссылки, для которых предполагается реальный href,\n * но который на вёрстке ещё не известен.\n * Если не отменить для таких ссылок действие по умолчанию,\n * то при клике страница перепрыгнет на самый верх, а в адресной строке появится #.\n *\n * NOTE: Также данный модуль отправляет сообщения в логгер, если подобные ссылки\n * найдены на продакт-сервере (там вместо # должны быть проставлены реальные адреса).\n */\napp.createModule(\"linksWithHash\", function() {\n    var links = document.querySelectorAll(\"a[href='#']\");\n    if (!links.length) {\n        return false;\n    }\n\n    DEBUG && console.log(\"%c[module linksWithHash] \" + links.length + \" links with href='#' found. is it ok for this page?? maybe you need to replace '#' with normal link? check it.\", \"color: orange\");\n    var isLocal = app.isLocal;\n\n\n    /**\n     * Простой обрабочик, который отменяет действие по умолчанию\n     *\n     * @param  {object} e Event\n     */\n    var linksWithHashHandler = function(e) {\n        e.preventDefault();\n        DEBUG && console.log(\"[module linksWithHash] default action prevented for link\");\n    };\n\n\n    // Привязка функций к событиям\n    for (var i = 0, len = links.length, link; i < len; i++) {\n        link = links[i];\n        link.addEventListener(\"click\", linksWithHashHandler, false);\n    }\n\n\n    // Если на боевом сервере найдены ссылки с атрибутом href=\"#\",\n    // то отправляем в логгер сообщение об ошибке,\n    // так как там уже должны быть настоящие ссылки вместо заглушек.\n    if (typeof Raven !== \"undefined\" && !isLocal) {\n        var extra = {};\n\n        // Формируем объект, в котором перечислены все найденные ссылки,\n        // причём с указанием их html-кода\n        // (для того, чтобы можно было определить, какие именно ссылки найдены, точно ли это ошибка или нет)\n        Array.prototype.forEach.call(links, function(link, index) {\n            var html = link.outerHTML;\n            extra[\"link\" + (index + 1)] = html;\n        });\n\n        Raven.captureMessage(\"[module linksWithHash] links with href='#' found\", {\n            level: \"warning\", // one of 'info', 'warning', or 'error'\n            extra: extra\n        });\n    }\n});","/**\n * Мобильное меню\n *\n * NOTE: Модуль можно удалить, если на сайте предусмотрено\n * принципиально иное меню для мобильных устройств.\n */\napp.createModule(\"mobMenu\", [\"windowScroll\"], function() {\n    var parentClass = \"js-mobmenu\";\n    var parent = $(\".\" + parentClass);\n    if (!parent.length) {\n        return false;\n    }\n\n    // Локальные переменные\n    var toggleBtns = $(\".js-mobmenu-toggle\");\n    var openedClass = \"is-opened\";\n    var activeClass = \"is-active\";\n    var opened = false;\n    var $body = app.commonVars.$body;\n    var expandedBlocks = $(\".js-mobmenu-expand\");\n\n\n    var openMenu = function() {\n        if (opened) {\n            return;\n        }\n        opened = true;\n\n        toggleBtns.addClass(activeClass);\n        parent.addClass(openedClass);\n        DEBUG && console.log(\"[module mobMenu] menu opened\");\n    };\n\n\n    var closeMenu = function() {\n        if (!opened) {\n            return;\n        }\n        opened = false;\n\n        toggleBtns.removeClass(activeClass);\n        parent.removeClass(openedClass);\n        DEBUG && console.log(\"[module mobMenu] menu closed\");\n    };\n\n\n    var toggleBtnClick = function() {\n        if (opened) {\n            closeMenu();\n        } else {\n            openMenu();\n        }\n    };\n\n\n    /**\n     * Обработчик события пролистывания страницы.\n     * Мы будем скрывать меню, если пользователь начал листать страницу вниз.\n     *\n     * @param  {number} y Текущее значение прокрутки страницы\n     */\n    var scrollController = function(y) {\n        if (!opened) {\n            return;\n        }\n        // Значение уже придёт нам из модуля app.modules.windowScroll,\n        // но на всякий случай пропишем fallback.\n        y = typeof y === \"number\" ? y : document.body.scrollTop || document.documentElement.scrollTop;\n\n        var menuHeight = parent.outerHeight() + expandedBlocks.outerHeight();\n\n        if (y > menuHeight + 20) {\n            closeMenu();\n        }\n    };\n\n\n    /**\n     * Как и в случае со всплывашками на сайте,\n     * для меню, если мы видим оставшуюся часть страницы, и кликаем по затемнённой области,\n     * то пользователь интуитивно ожидает, что меню закроется.\n     * Данный обработчик как раз для этого.\n     *\n     * @param  {object} e Event\n     */\n    var bodyClick = function(e) {\n        if (!opened) {\n            return;\n        }\n\n        var target = $(e.target);\n        var hasParent = target.closest(\".\" + parentClass).length > 0;\n\n        // Закрываем меню, только если клик произошёл\n        // по элементу вне пределов родительского блока\n        // (по сути - клик по любой точке экрана, кроме меню).\n        if (!hasParent) {\n            closeMenu();\n\n            // Отмена действия по умолчанию\n            // (например, чтобы не произошёл переход по ссылке, если\n            // мы кликнули по элементу <a>).\n            return false;\n        }\n    };\n\n\n    // Привязка событий и функций-обработчиков\n    toggleBtns.on(\"click\", toggleBtnClick);\n    $body.on(\"click\", bodyClick);\n\n    // NOTE: Выловили нелепый баг, на айпадике.\n    // Без строчки ниже не срабатывало событие click у верхнего элемента body.\n    // Говно, дерьмо, жопа :D\n    app.commonVars.$wrapper.on(\"click\", function() {});\n\n\n    // Делегируем функцию в модуль windowScroll\n    // (единая точка входа для события \"scroll\").\n    DEBUG && console.log(\"%c--[module mobMenu] delegating scrollController to windowScroll module\", \"font-style: italic; color: #999\");\n    app.modules.windowScroll.addEvent(scrollController);\n});","app.createModule(\"newsList\", function() {\n    var parent = $(\".js-news-list\");\n    if (!parent.length) {\n        return false;\n    }\n\n    // Local variables\n    var items = parent.find(\".js-item\");\n    var dateClass = \"js-date\";\n    var toggleBtns = parent.find(\".js-toggle\");\n    var toggled = false;\n    var container = parent.find(\".js-container\");\n    var dAttrToggleText = \"data-toggle-text\";\n\n\n    // Methods\n    var toggleDate = function() {\n        var k = toggled ? 1 : -1;\n        items.sort(function(a, b) {\n            var $a = $(a);\n            var $b = $(b);\n            var dateTextA = $a.find(\".\" + dateClass).text().trim().split(\".\");\n            var dateTextB = $b.find(\".\" + dateClass).text().trim().split(\".\");\n            var dateTimeA = new Date(dateTextA[2], dateTextA[1] - 1, dateTextA[0]).getTime();\n            var dateTimeB = new Date(dateTextB[2], dateTextB[1] - 1, dateTextB[0]).getTime();\n            var res;\n            if (dateTimeA > dateTimeB) {\n                res = -1 * k;\n            } else if (dateTimeA < dateTimeB) {\n                res = 1 * k;\n            } else {\n                res = 0;\n            }\n            return res;\n        });\n\n        toggleBtns.each(function() {\n            var self = $(this);\n            var dText = self.attr(dAttrToggleText).trim();\n            self.attr(dAttrToggleText, self.text().trim()).text(dText);\n        });\n\n        toggled = !toggled;\n        container.append(items);\n        DEBUG && console.log(\"[module newsList] sorted: \" + (toggled ? \"older\" : \"newer\") + \" first\");\n    };\n\n    // Binds\n    toggleBtns.on(\"click\", toggleDate);\n});","/**\n * Общая точка входа\n * для события полной загрузки страницы\n * (включая загрузку изображений, метрик и прочего).\n *\n * NOTE: Не путать с событием DOMContentLoaded\n * (оно же - $(document).ready(function() {...}) - в терминах jQuery).\n */\napp.createModule(\"pageLoad\", function() {\n\n    // Локальные переменные\n    var module = this;\n    var events = [];\n    var singleFunctionFired = false;\n    var timeoutInit = 120;\n    var timeoutDelta = 80;\n    var $window = app.commonVars.$window;\n\n\n    /**\n     * Функция, которая сработает лишь один раз,\n     * и будет означать полную загрузку страницы.\n     */\n    var singleLoadFunction = function() {\n        var readyState = document.readyState;\n        var func, timeoutCurrent;\n        if ((readyState !== \"complete\" || singleFunctionFired) || !events.length) {\n            return false;\n        }\n\n        DEBUG && console.log(\"%c[module pageLoad] window load event fired, count of functions to init: \" + events.length + \", timeout for first func: \" + timeoutInit + \", timeout delta for other: \" + timeoutDelta, \"color: purple\");\n\n        while (events.length > 0) {\n            // Взять первый элемент массива,\n            // и передать его в переменную.\n            func = events.shift();\n\n            // Будем запускать наши отложенные функции\n            // через определённые промежутки времени, друг за другом с некоторым промежутком.\n            // Мы уже знаем, что это функции,\n            // поэтому доп. проверка не требуется.\n            timeoutCurrent = timeoutCurrent ? timeoutCurrent + timeoutDelta : timeoutInit;\n            setTimeout(func, timeoutCurrent);\n        }\n\n        singleFunctionFired = true;\n    };\n\n\n    // Привязка собитий и функции-обработчика\n    if (document.readyState === \"complete\") {\n        singleLoadFunction();\n    } else {\n        $window.one(\"load ready\", singleLoadFunction);\n    }\n\n\n    /**\n     * Добавление переданной функции в очередь на выполнение,\n     * либо немедленное исполнение функции, если страница уже полностью загружена.\n     *\n     * @param {function} func\n     */\n    var addEvent = function(func) {\n        if (typeof func !== \"function\") {\n            return;\n        }\n\n        // Если страница ещё не загружена полность, то добавляем в очередь\n        if (!singleFunctionFired) {\n            events.push(func);\n            DEBUG && console.log(\"[module pageLoad] function added, count of functions to init now: \" + events.length);\n\n        // Если уже загружена, то просто вызываем переданную функцию\n        } else {\n            DEBUG && console.log(\"[module pageLoad] firing function immediately, because window load event already fired\");\n            func();\n        }\n    };\n\n\n    // Доступ к фукциям\n    // текущего модуля\n    module.addEvent = addEvent;\n});","/**\n * Всплывашки на сайте\n *\n * NOTE: Механизм, позволяющий отменить скролл для страницы, при открытой всплывашке,\n * достаточно хитрый, поэтому лучше изучить данный модуль, чтобы досконально понимать, как он работает\n */\napp.createModule(\"popups\", function() {\n    var popupClass = \"popup\";\n    var popups = $(\".\" + popupClass);\n    if (!popups.length) {\n        return false;\n    }\n\n    // Локальные переменные\n    var openedClass = \"is-opened\";\n    var $body = app.commonVars.$body;\n    var $document = app.commonVars.$document;\n    var $window = app.commonVars.$window;\n    var dAttrSelector = \"data-popup-selector\";\n    var dAttrBgClose = \"data-bg-close\";\n    var hiddenClass = \"g-hidden\";\n    var evNameOpen = \"popups:open\";\n    var evNameClose = \"popups:close\";\n    var openPopupBtns = $(\".js-open-popup\");\n    var closePopupBtns = $(\".js-close-popup\");\n    var $wrapper = app.commonVars.$wrapper;\n    var wrapperAbsClass = \"is-abs\";\n    var popupOpenedClass = \"is-popup-opened\";\n    var transitionEventEnd = app.features.transitionEventEnd;\n    var fixedPageElems = $(\".js-page-fixed-elem\");\n    var hasFixedElems = fixedPageElems.length > 0;\n    var hideDelayDefault = 3500;\n    var dAttrUrl = \"data-url\";\n    var staticBackUrl = window.location.pathname;\n    var historyPushed = false;\n    var dAttrAutohide = \"data-autohide\";\n    var dAttrHide = \"data-hide\";\n    var autohidePopups = popups.filter(\"[\" + dAttrAutohide + \"='true']\");\n    var dAttrClose = \"data-close-popup\";\n\n\n    // Перемещаем все всплывашки в конец <body>.\n    // Это нужно для того, чтобы при открытии всплывашки,\n    // событие \"scroll\" всплывало до <body> и <html>,\n    // но НЕ всплывало до <div class=\"l-wrapper\">.\n    // Это важно, так как при открытии всплывашки прокрутка\n    // убирается у <body> и появляется у <div class=\"l-wrapper\">.\n    // Тем самым, мы \"отменяем скролл\".\n    //\n    // NOTE: На самом деле, отменить стандартный скролл браузера нельзя\n    // (иначе не было бы всей этой истории).\n    // Можно отменить, например, всплытие события \"click\" или действие по умолчанию для него.\n    // Но ряд событий отменить или прервать всплытие нельзя.\n    popups.each(function() {\n        var self = $(this);\n        $body.append(self.removeClass(hiddenClass));\n    });\n\n\n    // Вспомогательные функции\n    var getScrollbarWidth = app.utils.getScrollbarWidth;\n    var getScrTop = app.utils.getScrTop;\n    var getOpenedPopups = function() {\n        return popups.filter(\".\" + openedClass);\n    };\n\n\n    /**\n     * Изменение адресной строки браузера при открытии всплывашки\n     * (по необходимости).\n     * Доп. инфа:\n     * http://stackoverflow.com/questions/824349/modify-the-url-without-reloading-the-page\n     *\n     * @param  {string} url     Новый адрес\n     * @param  {string} popupID Необходимо для отработки случая, когда мы перешли на страницу по прямому адресу\n     */\n    var changePageUrl = function(url, popupID) {\n        // Если браузер не поддерживает работу с историей,\n        // то прерываем выоплнение функции.\n        if (!window.history || typeof window.history.pushState !== \"function\" || typeof url !== \"string\") {\n            DEBUG && console.log(\"%c[module popups] !window.history || typeof window.history.pushState != function || typeof url != string\", \"color: red\");\n            return;\n        }\n\n        // Переход \"вперёд\" по истории браузера ...\n        if (url !== \"back\") {\n            DEBUG && console.log(\"%c[module popups] trying to change page url to: \" + url, \"font-style: italic\");\n            window.history.pushState(false, false, url);\n            historyPushed = true;\n\n        // ... переход \"назад\"\n        } else {\n\n            // Случай, когда мы до этого открыли всплывашку и перешли \"вперёд\"\n            if (historyPushed) {\n                DEBUG && console.log(\"%c[module popups] trying to go back in history\", \"font-style: italic\");\n                window.history.back();\n\n            // Случай, когда до этого не было перехода \"вперёд\"\n            // (например, пользователь перешёл по прямой ссылке).\n            } else if (typeof popupID === \"string\") {\n                var urlToChange = staticBackUrl;\n                urlToChange = staticBackUrl.substring(0, staticBackUrl.length - popupID.length - 1);\n                DEBUG && console.log(\"%c[module popups] replacing page url to \" + urlToChange, \"font-style: italic; color: orange\");\n                window.history.replaceState(false, false, urlToChange);\n            }\n        }\n    };\n\n\n    /**\n     * Все действия, связанные с открытием всплывашки\n     */\n    var popupOpen = function() {\n        var self = $(this);\n        if (self.hasClass(openedClass)) {\n            return;\n        }\n\n        // Если до этого уже были открыты всплывашки,\n        // то вычисляем наибольший z-index, и присваиваем его\n        // новой открывающейся всплывашке.\n        // Иначе возможны ситуации, когда всплывашка открылась, но из-за расположения по вёрстке\n        // оказалась ниже (за счет одинакового z-index), и в итоге её не видно.\n        var openedPopups = getOpenedPopups();\n        if (openedPopups.length > 0) {\n            var maxZI = 0;\n            openedPopups.each(function() {\n                var popup = $(this);\n                if (popup.attr(\"data-ignore\") === \"true\") {\n                    return;\n                }\n                var zi = parseInt(popup.css(\"zIndex\"), 10);\n                if (isNaN(zi)) {\n                    zi = 0;\n                }\n                maxZI = Math.max(maxZI, zi);\n            });\n\n            if (maxZI > 0) {\n                self.css(\"zIndex\", maxZI + 1);\n                DEBUG && console.log(\"%c--[module popups] added z-index \" + (maxZI + 1) + \", because there was another opened popups\", \"font-style: italic; color: #999\");\n            }\n        }\n\n        // Вычисляем текущую величину прокрутки страницы\n        // (делаем это до того, как будут произведены какие-либо дальнейшие действия).\n        var scrTop = getScrTop();\n        DEBUG && console.log(\"[module popups] scrTop: \" + scrTop);\n\n        // Если есть fixed элементы на странице,\n        // то задаём им padding-right, равный ширине полосы прокрутки.\n        // Без этого такие элементы будут дёргаться,\n        // так как в процессе открытия всплывашки слегка меняются общие стили страницы.\n        if (hasFixedElems) {\n            var scrollbarWidth = getScrollbarWidth();\n            DEBUG && console.log(\"[module popups] scrollbarWidth: \" + scrollbarWidth);\n            fixedPageElems.css(\"padding-right\", scrollbarWidth + \"px\");\n        }\n\n        // NOTE: Это из-за плашки browser-update,\n        // которая задаёт <html> ненулевой margin-top,\n        // (в случае, если плашка об устаревшем браузере показана)\n        // из-за которого страница \"прыгает\".\n        var mt = parseInt($document.css(\"marginTop\"), 10);\n        var mtExists = !isNaN(mt) && mt !== 0;\n        if (mtExists) {\n            scrTop -= mt;\n        }\n\n        // Основная магия происходит здесь.\n        // Элементу .l-wrapper задаётся класс, который одновременно\n        // убирает полосу прокрутки у <body> (так как .l-wrapper теперь position: absolute),\n        // и добавляет полосу прокрутки у самого .l-wrapper (за счёт overflow: auto).\n        // После этого остаётся прокрутить элемент .l-wrapper до того же значения,\n        // которое было до этого у <body> (мы посчитали эту величину ранее).\n        // Происходит это достаточно быстро, чтобы пользователь ничего не заметил.\n        $wrapper.addClass(wrapperAbsClass).scrollTop(scrTop);\n\n        // NOTE: Это из-за плашки browser-update\n        if (mtExists) {\n            $document.scrollTop(0);\n        }\n\n        // Это для отсутсвия скролла у <body> в некоторых редких случаях\n        // (например, если висит плашка об устаревшем браузере)\n        $body.addClass(popupOpenedClass);\n\n        // Здесь предусмотрена возможность автоматически скрывать некоторые всплывашки\n        // при открытии других всплывашек.\n        // Для этого им нужно задать определённый data- атрибут\n        // (указан в локальных переменных в начале модуля).\n        var autohidePopupsOpened = autohidePopups.filter(\".\" + openedClass);\n        if (autohidePopupsOpened.length > 0) {\n            DEBUG && console.log(\"[module popups] hided \" + autohidePopupsOpened.length + \" popups with \" + dAttrAutohide + \"=true\");\n            autohidePopups.removeClass(openedClass);\n        }\n\n        // Далее, делаем нашу всплывашку видимой (за счёт класса)\n        self.addClass(openedClass);\n\n        // Здесь предусмотрена возможность\n        // закрыть текущую всплывашку через определённый промежуток времени\n        // (например, всплывашка с которким информационным сообщением).\n        // Для этого им нужно задать определённый data- атрибут\n        // (указан в локальных переменных в начале модуля).\n        var hideDelay = self.attr(dAttrHide);\n        if (hideDelay) {\n            hideDelay = parseInt(hideDelay, 10);\n            hideDelay = isNaN(hideDelay) ? hideDelayDefault : hideDelay;\n            setTimeout(function() {\n                self.trigger(evNameClose);\n            }, hideDelay);\n        }\n\n        // При необходимости, можно управлять адресной строкой браузера\n        var urlToChange = self.attr(dAttrUrl);\n        if (urlToChange) {\n            changePageUrl(urlToChange);\n        }\n\n        DEBUG && console.log(\"[module popups] opened popup: \" + (self.attr(\"id\") ? \"#\" + self.attr(\"id\") : \".\" + self.attr(\"class\")));\n    };\n\n\n    /**\n     * Возврат страницы к исходному\n     * (до того, как была открыта хоть одна всплывшка)\n     * состоянию.\n     *\n     * @param  {boolean} force Часть функционала можно исполнить принудительно\n     */\n    var clearScrollStyles = function(force) {\n        if (force == null) {\n            force = false;\n        }\n\n        // Функция выполнится, если не осталось открытых всплывашек\n        // (потому что их может быть несколько, и закрытие одной не означает закрытие всех),\n        // либо принудительно (в редких случаях).\n        var hasOpenedPopups = getOpenedPopups().length > 0;\n        if (hasOpenedPopups && !force) {\n            return;\n        }\n\n        // Вычисляем текущую величину прокрутки страницы\n        // (функция getScrTop достаточно \"умная\", чтобы посчитать текущий скролл при любом состоянии).\n        // Это нужно сделать до того, как произойдут дальнейшие действия.\n        var scrTop = getScrTop();\n        DEBUG && console.log(\"%c[module popups] (clearScrollStyles) scrTop: \" + scrTop + \". force: \" + force, \"color: #999\");\n\n        // Возвращаем структурные элементы .l-wrapper и body\n        // к исходному состоянию, убираем все необходимые классы.\n        $wrapper.removeClass(wrapperAbsClass);\n        $body.removeClass(popupOpenedClass);\n\n        // Если на странице есть fixed элементы,\n        // то убираем ранее заданное значение radding-right\n        if (hasFixedElems) {\n            fixedPageElems.css(\"padding-right\", \"\");\n        }\n\n        // NOTE: Это из-за плашки browser-update\n        var mt = parseInt($document.css(\"marginTop\"), 10);\n        var mtExists = !isNaN(mt) && mt !== 0;\n        if (mtExists) {\n            scrTop += mt;\n        }\n\n        // Наконец, пролистываем body до того значения,\n        // который был у .l-wrapper.\n        // Происходит это довольно быстро, так что пользователь не заметит разницы.\n        $document.scrollTop(scrTop);\n    };\n\n\n    /**\n     * Все действия, связанные с закрытием всплывашки\n     */\n    var popupClose = function() {\n        var self = $(this);\n        if (!self.hasClass(openedClass)) {\n            return;\n        }\n\n        self.removeClass(openedClass);\n\n        // Так как вплывашка прилетает не мгновенно, а плавно,\n        // то сразу делать возврат страницы к исходному состоянию нельзя\n        // (будут видны артефакты, сязанные с переводом полосы прокрутки\n        // от body к .l-wrapper и обратно).\n        var end = function() {\n            setTimeout(function() {\n                clearScrollStyles();\n            }, 200);\n        };\n\n        // Для современных браузеров, где работает свойство transition,\n        // вешаем обработчик на событие transitionEnd.\n        if (transitionEventEnd) {\n            self.one(transitionEventEnd, end);\n\n        // Для старых браузеров, сразу вызываем функцию.\n        } else {\n            end();\n        }\n\n        // При необходимости,\n        // меняем (возвращаем обратно)\n        // адрес в строке браузера.\n        var urlToChange = self.attr(dAttrUrl);\n        var popupID = self.attr(\"id\");\n        if (urlToChange) {\n            changePageUrl(\"back\", popupID);\n        }\n\n        DEBUG && console.log(\"[module popups] closed popup: \" + (self.attr(\"id\") ? \"#\" + self.attr(\"id\") : \".\" + self.attr(\"class\")));\n    };\n\n\n    /**\n     * Обработчик события \"click\", который определяет,\n     * по какому именно мы кликнули элементу, и, если это\n     * \"пустое пространство\" за самой всплывахой,\n     * то закрываем её.\n     *\n     * NOTE: Можно отменить данное действие, задав дополнительный data- атрибут\n     *\n     * @param  {object} e Event\n     */\n    var popupClick = function(e) {\n        var self = $(this);\n        if (e.target === this && self.attr(dAttrBgClose) !== \"false\") {\n            self.trigger(evNameClose);\n        }\n    };\n\n\n    /**\n     * Клик по кнопкам, открывающим всплывахи.\n     * Какую именно всплывашку открыть - обозначено в data- атрибуте.\n     */\n    var openPopupBtnClick = function() {\n        var self = $(this);\n        var selector = self.attr(dAttrSelector);\n        var popup = popups.filter(selector);\n        popup.trigger(evNameOpen);\n\n        var closePopupSelector = self.attr(dAttrClose);\n        if (closePopupSelector) {\n            var popupToClose = $(closePopupSelector);\n            popupToClose.trigger(evNameClose);\n        }\n    };\n\n\n    /**\n     * Клик по кнопкам, закрывающим всплывашку.\n     * Будет закрыта \"родительская\" всплывашка\n     * (поиск по ближайшему родителю с нужным классом).\n     */\n    var closePopupBtnClick = function() {\n        var self = $(this);\n        var popup = self.closest(\".\" + popupClass);\n        popup.trigger(evNameClose);\n    };\n\n\n    /**\n     * Так как прокрутку страницы мы \"отменяем\" хитрым способом,\n     * то при попытке перезагрузить страницу, на которой уже открыта всплывашка,\n     * нас перекинет наверх страницы.\n     * Это подбешивает, поэтому привязываем данную функцию на событие закрытия (обновления)\n     * страницы. Мы принудительно возвращаем страницу к её исходному состоянию,\n     * тем самым нас не перекинет наверх после перезагрузки.\n     */\n    var windowUnload = function() {\n        clearScrollStyles(true);\n    };\n\n\n    /**\n     * Обработчик нажатий на кнопки клавиатуры.\n     * Необходим для того, чтобы можно было закрыть всплывашку кнопкой ESC.\n     *\n     * NOTE: Так как возможны случаи, когда открыто несколько всплывах,\n     * то закрываем их одна за одной, начиная с той, у которой наибольший z-index.\n     *\n     * @param  {object} e Event\n     */\n    var keyController = function(e) {\n        // Обрабатываем только нажатие на ESC,\n        // а все остальные нажатия игнорируем.\n        if (e.keyCode !== 27) {\n            return;\n        }\n\n        var openedPopups = getOpenedPopups();\n        if (!openedPopups.length) {\n            return;\n        }\n        var maxZI = 0;\n        var lastOpenedPopup = undefined;\n        openedPopups.each(function() {\n            var popup = $(this);\n            var zi = parseInt(popup.css(\"zIndex\"), 10);\n\n            if (isNaN(zi)) {\n                zi = 0;\n            }\n            if (zi >= maxZI) {\n                maxZI = zi;\n                lastOpenedPopup = popup;\n            }\n        });\n\n        if (!lastOpenedPopup) {\n            return;\n        }\n\n        // Закрываем только последнюю открытую всплывашку\n        lastOpenedPopup.trigger(evNameClose);\n    };\n\n\n    // Привязка событий и функций-обработчиков\n    popups.on(evNameOpen, popupOpen);\n    popups.on(evNameClose, popupClose);\n    openPopupBtns.on(\"click\", openPopupBtnClick);\n    closePopupBtns.on(\"click\", closePopupBtnClick);\n    popups.on(\"click\", popupClick);\n    $window.on(\"beforeunload\", windowUnload);\n    $window.on(\"keyup\", keyController);\n\n\n\n    // Unit-tests\n    if (DEBUG && typeof describe === \"function\") {\n        describe(\"[module popups]\", function() {\n            it(\"all popups must be moved on <body> level\", function() {\n                popups.each(function() {\n                    expect(this.parentElement.nodeName.toLowerCase()).to.be.equal(\"body\");\n                });\n            });\n            it(\"each popup must have custom events: \" + evNameOpen + \" and \" + evNameClose, function() {\n                popups.each(function() {\n                    var obj = $._data(this, \"events\");\n                    expect(evNameOpen in obj).to.be.equal(true);\n                    expect(evNameClose in obj).to.be.equal(true);\n                });\n            });\n        });\n    }\n});","/**\n * Адаптивные таблицы.\n * Вдохновение было взято отсюда:\n * http://codepen.io/anon/pen/QwPVNW\n * https://css-tricks.com/examples/ResponsiveTables/responsive.php\n * http://codepen.io/pixelchar/pen/rfuqK\n */\napp.createModule(\"responsiveTables\", function() {\n    var tables = $(\"table\");\n    if (!tables.length) {\n        return false;\n    }\n\n    // Локальные переменные\n    var dAttrLabel = \"data-label\";\n\n\n    tables.each(function() {\n        var table = $(this);\n        var thead = table.find(\"thead\");\n\n        // Случай, когда таблица неправильно свёрстана\n        // (напр., через визивик)\n        if (!thead.length) {\n            thead = table.find(\"tr:first-child\");\n        }\n\n        var th = thead.find(\"th, td\");\n        var labels = [];\n        th.each(function() {\n            labels.push($(this).text().trim());\n        });\n\n        table.find(\"tr\").each(function() {\n            var tr = $(this);\n            tr.find(\"td\").each(function(index) {\n                var td = $(this);\n                if (!td.attr(dAttrLabel)) {\n                    td.attr(dAttrLabel, labels[index]);\n                }\n            });\n        });\n    });\n\n\n\n    // Unit-tests\n    if (DEBUG && typeof describe === \"function\") {\n        describe(\"[module responsiveTables]\", function() {\n            it(\"labels array must be non-empty\", function() {\n                tables.each(function() {\n                    var table = $(this);\n                    var thead = table.find(\"thead\");\n\n                    // Случай, когда таблица неправильно свёрстана\n                    // (напр., через визивик)\n                    if (!thead.length) {\n                        thead = table.find(\"tr:first-child\");\n                    }\n\n                    var th = thead.find(\"th, td\");\n                    var labels = [];\n                    th.each(function() {\n                        labels.push($(this).text().trim());\n                    });\n\n                    expect(labels).to.be.an(\"array\");\n                    expect(labels.length).to.be.above(0);\n                });\n            });\n\n            it(\"must add \" + dAttrLabel + \" attribute to each table cell (inside <tbody>)\", function() {\n                tables.find(\"tbody td\").each(function() {\n                    var td = $(this);\n                    expect(td.attr(dAttrLabel)).to.not.be.undefined;\n                });\n            });\n        });\n    }\n});","app.createModule(\"sidebar\", function() {\n    var parent = $(\".js-sidebar\");\n    if (!parent.length) {\n        return false;\n    }\n\n    // Local variables\n    var toggleBtns = parent.find(\".js-sidebar-toggle\");\n    var openedClass = \"is-opened\";\n\n    // Methods\n    var toggleSidebar = function() {\n        parent.toggleClass(openedClass);\n        DEBUG && console.log(\"[module sidebar] toggled\");\n    };\n\n    // Binds\n    toggleBtns.on(\"click\", toggleSidebar);\n});","/**\n * Общая точка входа\n * для события изменения размеров экрана.\n *\n * NOTE: Событие на практике происходит редко\n * (например, поворот планшета или телефона, или равзернуть окно на полный экран на десктопе),\n * поэтому мы будем \"выполнять\" его с помощью debouncer\n * (отложенное выполнение).\n */\napp.createModule(\"windowResize\", function() {\n\n    // Локальные переменные\n    var module = this;\n    var events = [];\n    var $window = app.commonVars.$window;\n\n\n    /**\n     * Основной обработчик,\n     * который проходит по всем функциям из массива events\n     * и выполняет их.\n     *\n     * Вызываем обработчик через debouncer (задержка по выполнению),\n     * чтобы функции из массива не вызывались слишком часто.\n     */\n    var resizeController = app.utils.debouncer(function() {\n        if (!events.length) {\n            return;\n        }\n\n        var f, i, len;\n        for (i = 0, len = events.length; i < len; i++) {\n            f = events[i];\n            f();\n        }\n    });\n\n\n    /**\n     * Добавление переданной функции в массив всех функций,\n     * которые будут вызваны при срабатывании события \"resize\" окна браузера.\n     *\n     * @param {function} func\n     */\n    var addEvent = function(func) {\n        if (typeof func !== \"function\") {\n            return;\n        }\n\n        events.push(func);\n        DEBUG && console.log(\"[module windowResize] function added, count of functions to init now: \" + events.length);\n    };\n\n\n    // Привязка события и обработчика\n    $window.on(\"resize\", resizeController);\n\n\n    // Доступ к фукциям\n    // текущего модуля\n    module.addEvent = addEvent;\n});","/**\n * Общая точка входа\n * для события скролла страницы.\n *\n * NOTE: Контроллер будет передавать текущее значение скролла\n * каждой из переданных в данный модуль функций.\n */\napp.createModule(\"windowScroll\", function() {\n\n    // Локальные переменные\n    var module = this;\n    var events = [];\n    var enabled = false;\n    var $window = app.commonVars.$window;\n\n\n    /**\n     * Основной обработчик,\n     * который проходит по всем функциям из массива events\n     * и выполняет их.\n     */\n    var scrollController = function() {\n        if (!enabled) {\n            return;\n        }\n\n        var y = document.body.scrollTop || document.documentElement.scrollTop;\n        var f, i, len;\n        for (i = 0, len = events.length; i < len; i++) {\n            f = events[i];\n            f.call(this, y);\n        }\n    };\n\n\n    /**\n     * Привязка события и контроллера.\n     * Вынесено в отдельную функцию, так как если модулю не передана ни одна функция на событие \"scroll\"\n     * то и общий обработчик вешать нет смысла.\n     * Сделано для оптимизации производительности (небольшая прибавка).\n     */\n    var bind = function() {\n        $window.on(\"scroll\", scrollController);\n    };\n\n\n    /**\n     * Добавление переданной функции в массив всех функций,\n     * которые будут вызваны при срабатывании события \"scroll\".\n     *\n     * @param {function} func\n     */\n    var addEvent = function(func) {\n        if (typeof func !== \"function\") {\n            return;\n        }\n\n        if (!enabled) {\n            enabled = true;\n            bind();\n        }\n\n        events.push(func);\n        DEBUG && console.log(\"[module windowScroll] function added, count of functions to init now: \" + events.length);\n    };\n\n\n    // Доступ к фукциям\n    // текущего модуля\n    module.addEvent = addEvent;\n});"]}